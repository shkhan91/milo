<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vortex - Local Test</title>
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #f5f5f5;
    }
    .test-banner {
      background: #FF6B00;
      color: white;
      padding: 8px 16px;
      text-align: center;
      font-size: 14px;
      font-weight: 600;
    }
  </style>
  <link rel="stylesheet" href="vortex.css">
</head>
<body>
  <div class="test-banner">
    üß™ LOCAL TEST MODE - Server: file:// protocol
  </div>
  <main>
    <div>
      <div class="vortex-hero">
        <h1>üåÄ Vortex</h1>
        <p>AI-Powered Video Command Center</p>
      </div>
      <div class="vortex-app"></div>
    </div>
  </main>
  
  <script type="module">
    // Helper function to create DOM elements
    function createTag(tag, attributes = {}, content = '') {
      const element = document.createElement(tag);
      Object.entries(attributes).forEach(([key, value]) => {
        if (key === 'style' && typeof value === 'object') {
          Object.assign(element.style, value);
        } else {
          element.setAttribute(key, value);
        }
      });
      if (content) {
        element.innerHTML = content;
      }
      return element;
    }

    // Mock video data
    const MOCK_VIDEOS = [
      {
        id: '1',
        title: 'Adobe Creative Cloud Overview 2024',
        duration: '12:45',
        views: '125K',
        date: '2 days ago',
        thumbnail: 'üé®',
      },
      {
        id: '2',
        title: 'Photoshop AI Features Deep Dive',
        duration: '18:30',
        views: '89K',
        date: '5 days ago',
        thumbnail: 'üñºÔ∏è',
      },
      {
        id: '3',
        title: 'Adobe Express Tutorial for Beginners',
        duration: '8:15',
        views: '256K',
        date: '1 week ago',
        thumbnail: '‚ú®',
      },
      {
        id: '4',
        title: 'Illustrator Vector Mastery',
        duration: '22:10',
        views: '45K',
        date: '3 days ago',
        thumbnail: 'üéØ',
      },
      {
        id: '5',
        title: 'After Effects Motion Graphics',
        duration: '15:40',
        views: '178K',
        date: '4 days ago',
        thumbnail: 'üé¨',
      },
      {
        id: '6',
        title: 'Premiere Pro Editing Workflow',
        duration: '19:25',
        views: '312K',
        date: '1 week ago',
        thumbnail: 'üéûÔ∏è',
      },
    ];

    const MOCK_COLLECTIONS = [
      { id: 'c1', name: 'Creative Cloud Essentials', count: 12, icon: 'üìö' },
      { id: 'c2', name: 'AI-Powered Features', count: 8, icon: 'ü§ñ' },
      { id: 'c3', name: 'Quick Tips & Tricks', count: 24, icon: 'üí°' },
      { id: 'c4', name: 'Product Launches', count: 6, icon: 'üöÄ' },
    ];

    const QUICK_ACTIONS = [
      { id: 'recommend', label: 'Recommend Video Collection', icon: 'üéØ' },
      { id: 'clip', label: 'Create Smart Clips', icon: '‚úÇÔ∏è' },
      { id: 'captions', label: 'Generate Captions', icon: 'üí¨' },
      { id: 'chapters', label: 'Auto-Generate Chapters', icon: 'üìë' },
      { id: 'transcribe', label: 'Transcribe Audio', icon: 'üìù' },
      { id: 'summarize', label: 'Create Summary', icon: 'üìä' },
    ];

    class VortexApp {
      constructor() {
        this.currentTab = 'videos';
        this.selectedVideos = new Set();
        this.recentActions = [];
        this.isProcessing = false;
        this.init();
      }

      init() {
        const container = document.querySelector('.vortex-app');
        if (!container) return;

        const appHTML = this.renderApp();
        container.innerHTML = appHTML;
        this.attachEventListeners();
        this.loadInitialData();
      }

      renderApp() {
        return `
          <div class="vortex-container">
            ${this.renderStats()}
            <div class="vortex-layout">
              ${this.renderSidebar()}
              ${this.renderMainContent()}
            </div>
          </div>
        `;
      }

      renderStats() {
        return `
          <div class="vortex-stats">
            <div class="vortex-stat-card">
              <div class="vortex-stat-value">2,458</div>
              <div class="vortex-stat-label">Total Videos</div>
            </div>
            <div class="vortex-stat-card" style="border-left-color: var(--vortex-accent);">
              <div class="vortex-stat-value">148</div>
              <div class="vortex-stat-label">Collections</div>
            </div>
            <div class="vortex-stat-card" style="border-left-color: var(--vortex-success);">
              <div class="vortex-stat-value">89.2%</div>
              <div class="vortex-stat-label">AI Accuracy</div>
            </div>
            <div class="vortex-stat-card" style="border-left-color: var(--vortex-warning);">
              <div class="vortex-stat-value">42</div>
              <div class="vortex-stat-label">Active Tasks</div>
            </div>
          </div>
        `;
      }

      renderSidebar() {
        return `
          <div class="vortex-sidebar">
            ${this.renderPromptSection()}
            ${this.renderQuickActions()}
            ${this.renderRecentActions()}
          </div>
        `;
      }

      renderPromptSection() {
        return `
          <div class="vortex-card vortex-prompt-section">
            <h3>AI Command Center</h3>
            <div class="vortex-prompt-input">
              <textarea 
                class="vortex-prompt-textarea" 
                id="vortex-prompt"
                placeholder="Enter your AI command... 

Examples:
‚Ä¢ Find all videos about Photoshop AI features
‚Ä¢ Create a 30-second highlight reel from video #1234
‚Ä¢ Generate captions for the Creative Cloud series
‚Ä¢ Suggest a collection of beginner tutorials"></textarea>
            </div>
            <div class="vortex-action-buttons">
              <button class="vortex-btn vortex-btn-primary" id="vortex-execute-btn">
                <span>‚ö°</span> Execute Command
              </button>
              <button class="vortex-btn vortex-btn-secondary" id="vortex-clear-btn">
                <span>üóëÔ∏è</span> Clear
              </button>
            </div>
          </div>
        `;
      }

      renderQuickActions() {
        return `
          <div class="vortex-card">
            <h3>Quick Actions</h3>
            <div class="vortex-quick-actions">
              ${QUICK_ACTIONS.map((action) => `
                <div class="vortex-quick-action" data-action="${action.id}">
                  <span class="vortex-quick-action-icon">${action.icon}</span>
                  <span>${action.label}</span>
                </div>
              `).join('')}
            </div>
          </div>
        `;
      }

      renderRecentActions() {
        return `
          <div class="vortex-card">
            <h3>Recent Actions</h3>
            <div class="vortex-recent-list" id="vortex-recent-list">
              ${this.recentActions.length === 0 ? `
                <div class="vortex-empty-state" style="padding: 24px 16px;">
                  <div style="font-size: 32px; margin-bottom: 8px;">üìã</div>
                  <div style="font-size: 13px; color: #999;">No recent actions</div>
                </div>
              ` : this.recentActions.map((action) => `
                <div class="vortex-recent-item">
                  ${action.text}
                  <div class="vortex-recent-item-time">${action.time}</div>
                </div>
              `).join('')}
            </div>
          </div>
        `;
      }

      renderMainContent() {
        return `
          <div class="vortex-main-content">
            ${this.renderTabs()}
            ${this.renderTabContent()}
          </div>
        `;
      }

      renderTabs() {
        const tabs = [
          { id: 'videos', label: 'Video Library' },
          { id: 'collections', label: 'Collections' },
          { id: 'processing', label: 'AI Processing' },
          { id: 'search', label: 'Smart Search' },
        ];

        return `
          <div class="vortex-tabs">
            ${tabs.map((tab) => `
              <button 
                class="vortex-tab ${this.currentTab === tab.id ? 'active' : ''}"
                data-tab="${tab.id}">
                ${tab.label}
              </button>
            `).join('')}
          </div>
        `;
      }

      renderTabContent() {
        const content = {
          videos: this.renderVideosTab(),
          collections: this.renderCollectionsTab(),
          processing: this.renderProcessingTab(),
          search: this.renderSearchTab(),
        };

        return `
          <div class="vortex-tab-content">
            ${content[this.currentTab]}
          </div>
        `;
      }

      renderVideosTab() {
        return `
          <div class="vortex-card">
            <div class="vortex-search-bar">
              <input 
                type="text" 
                class="vortex-search-input" 
                placeholder="Filter videos by title, tags, or content..."
                id="vortex-video-filter">
              <button class="vortex-btn vortex-btn-primary">
                üîç Search
              </button>
            </div>
            <div class="vortex-search-filters">
              <div class="vortex-filter-chip active">All Videos</div>
              <div class="vortex-filter-chip">Creative Cloud</div>
              <div class="vortex-filter-chip">Photoshop</div>
              <div class="vortex-filter-chip">Illustrator</div>
              <div class="vortex-filter-chip">After Effects</div>
              <div class="vortex-filter-chip">Premiere Pro</div>
            </div>
            <div class="vortex-video-grid" id="vortex-video-grid">
              ${MOCK_VIDEOS.map((video) => this.renderVideoCard(video)).join('')}
            </div>
          </div>
        `;
      }

      renderVideoCard(video) {
        return `
          <div class="vortex-video-card" data-video-id="${video.id}">
            <div class="vortex-video-thumbnail">
              <span style="font-size: 64px;">${video.thumbnail}</span>
              <div class="vortex-video-duration">${video.duration}</div>
            </div>
            <div class="vortex-video-info">
              <h4 class="vortex-video-title">${video.title}</h4>
              <div class="vortex-video-meta">
                <span>${video.views} views</span>
                <span>${video.date}</span>
              </div>
              <div class="vortex-video-actions">
                <button class="vortex-icon-btn" title="Edit">‚úèÔ∏è</button>
                <button class="vortex-icon-btn" title="Clip">‚úÇÔ∏è</button>
                <button class="vortex-icon-btn" title="Captions">üí¨</button>
                <button class="vortex-icon-btn" title="Analytics">üìä</button>
              </div>
            </div>
          </div>
        `;
      }

      renderCollectionsTab() {
        return `
          <div class="vortex-card">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
              <h2 style="margin: 0; font-size: 24px; color: #2C2C2C;">Video Collections</h2>
              <button class="vortex-btn vortex-btn-primary">
                ‚ûï Create Collection
              </button>
            </div>
            <div class="vortex-collections-grid">
              ${MOCK_COLLECTIONS.map((collection) => `
                <div class="vortex-collection-card" data-collection-id="${collection.id}">
                  <div class="vortex-collection-header">
                    <div class="vortex-collection-icon">${collection.icon}</div>
                    <div style="flex: 1;">
                      <h4 class="vortex-collection-name">${collection.name}</h4>
                      <div class="vortex-collection-count">${collection.count} videos</div>
                    </div>
                  </div>
                  <div class="vortex-video-actions">
                    <button class="vortex-icon-btn">üëÅÔ∏è View</button>
                    <button class="vortex-icon-btn">‚úèÔ∏è Edit</button>
                    <button class="vortex-icon-btn">ü§ñ AI Enhance</button>
                  </div>
                </div>
              `).join('')}
            </div>
          </div>
        `;
      }

      renderProcessingTab() {
        if (!this.isProcessing) {
          return `
            <div class="vortex-card">
              <div class="vortex-empty-state">
                <div class="vortex-empty-icon">‚ö°</div>
                <div class="vortex-empty-title">No Active Processing Tasks</div>
                <div class="vortex-empty-desc">
                  Use the AI Command Center to start processing videos with AI
                </div>
              </div>
            </div>
          `;
        }

        return `
          <div class="vortex-processing-panel">
            <div class="vortex-processing-header">
              <div class="vortex-processing-title">
                <div class="vortex-spinner"></div>
                <span>AI Processing in Progress</span>
              </div>
              <button class="vortex-btn vortex-btn-secondary" style="background: rgba(255,255,255,0.2); border: none; color: white;">
                Cancel
              </button>
            </div>
            <div class="vortex-processing-content">
              <div class="vortex-processing-step">
                <div class="vortex-step-icon complete">‚úì</div>
                <div>
                  <div style="font-weight: 600;">Video Analysis</div>
                  <div style="font-size: 13px; opacity: 0.8;">Analyzing video content and metadata</div>
                </div>
              </div>
              <div class="vortex-processing-step">
                <div class="vortex-step-icon complete">‚úì</div>
                <div>
                  <div style="font-weight: 600;">Audio Transcription</div>
                  <div style="font-size: 13px; opacity: 0.8;">Converting speech to text using AWS Bedrock</div>
                </div>
              </div>
              <div class="vortex-processing-step">
                <div class="vortex-step-icon">
                  <div class="vortex-spinner" style="width: 16px; height: 16px; border-width: 2px;"></div>
                </div>
                <div>
                  <div style="font-weight: 600;">AI Enhancement</div>
                  <div style="font-size: 13px; opacity: 0.8;">Generating captions and chapters</div>
                </div>
              </div>
              <div class="vortex-processing-step" style="opacity: 0.5;">
                <div class="vortex-step-icon">‚è≥</div>
                <div>
                  <div style="font-weight: 600;">Smart Recommendations</div>
                  <div style="font-size: 13px; opacity: 0.8;">Building related video suggestions</div>
                </div>
              </div>
            </div>
          </div>
        `;
      }

      renderSearchTab() {
        return `
          <div class="vortex-card vortex-search-section">
            <h2 style="margin: 0 0 24px; font-size: 24px; color: #2C2C2C;">Smart Search by Transcription</h2>
            <div class="vortex-search-bar">
              <input 
                type="text" 
                class="vortex-search-input" 
                placeholder="Search video transcriptions... (e.g., 'AI features in Photoshop')"
                id="vortex-transcript-search">
              <button class="vortex-btn vortex-btn-primary" id="vortex-search-transcripts-btn">
                üîç Search Transcripts
              </button>
            </div>
            <div class="vortex-search-filters">
              <div class="vortex-filter-chip active">All Results</div>
              <div class="vortex-filter-chip">Exact Match</div>
              <div class="vortex-filter-chip">Semantic Search</div>
              <div class="vortex-filter-chip">With Timestamps</div>
            </div>
            <div id="vortex-search-results">
              <div class="vortex-empty-state">
                <div class="vortex-empty-icon">üîç</div>
                <div class="vortex-empty-title">Search Video Transcriptions</div>
                <div class="vortex-empty-desc">
                  Find exact moments in videos by searching through AI-generated transcriptions
                </div>
              </div>
            </div>
          </div>
        `;
      }

      attachEventListeners() {
        // Tab switching
        document.querySelectorAll('.vortex-tab').forEach((tab) => {
          tab.addEventListener('click', (e) => {
            this.currentTab = e.target.dataset.tab;
            this.updateView();
          });
        });

        // Execute AI command
        const executeBtn = document.getElementById('vortex-execute-btn');
        if (executeBtn) {
          executeBtn.addEventListener('click', () => this.executeAICommand());
        }

        // Clear prompt
        const clearBtn = document.getElementById('vortex-clear-btn');
        if (clearBtn) {
          clearBtn.addEventListener('click', () => {
            document.getElementById('vortex-prompt').value = '';
          });
        }

        // Quick actions
        document.querySelectorAll('.vortex-quick-action').forEach((action) => {
          action.addEventListener('click', (e) => {
            const actionId = e.currentTarget.dataset.action;
            this.executeQuickAction(actionId);
          });
        });

        // Filter chips
        document.querySelectorAll('.vortex-filter-chip').forEach((chip) => {
          chip.addEventListener('click', (e) => {
            document.querySelectorAll('.vortex-filter-chip').forEach((c) => c.classList.remove('active'));
            e.target.classList.add('active');
          });
        });

        // Video card interactions
        document.querySelectorAll('.vortex-video-card').forEach((card) => {
          card.addEventListener('click', (e) => {
            if (!e.target.classList.contains('vortex-icon-btn')) {
              const videoId = card.dataset.videoId;
              this.showVideoDetails(videoId);
            }
          });
        });
      }

      async executeAICommand() {
        const prompt = document.getElementById('vortex-prompt')?.value.trim();
        if (!prompt) {
          this.showNotification('Please enter an AI command', 'warning');
          return;
        }

        this.addRecentAction(`AI Command: ${prompt.substring(0, 50)}...`);
        this.showNotification('AI command executed successfully! Processing...', 'success');
        
        // Switch to processing tab
        this.isProcessing = true;
        this.currentTab = 'processing';
        this.updateView();

        // Simulate processing completion
        setTimeout(() => {
          this.isProcessing = false;
          this.showNotification('Processing complete! Check the results.', 'success');
          this.updateView();
        }, 5000);
      }

      executeQuickAction(actionId) {
        const action = QUICK_ACTIONS.find((a) => a.id === actionId);
        if (action) {
          const prompt = document.getElementById('vortex-prompt');
          if (prompt) {
            prompt.value = `Execute: ${action.label}`;
            prompt.focus();
          }
          this.showNotification(`Quick action loaded: ${action.label}`, 'info');
        }
      }

      showVideoDetails(videoId) {
        const video = MOCK_VIDEOS.find((v) => v.id === videoId);
        if (video) {
          this.showNotification(`Opening video: ${video.title}`, 'info');
        }
      }

      addRecentAction(text) {
        const now = new Date();
        const time = now.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });
        
        this.recentActions.unshift({ text, time });
        if (this.recentActions.length > 5) {
          this.recentActions.pop();
        }

        const list = document.getElementById('vortex-recent-list');
        if (list) {
          list.innerHTML = this.recentActions.map((action) => `
            <div class="vortex-recent-item vortex-fade-in">
              ${action.text}
              <div class="vortex-recent-item-time">${action.time}</div>
            </div>
          `).join('');
        }
      }

      showNotification(message, type = 'info') {
        const colors = {
          success: 'var(--vortex-success)',
          warning: 'var(--vortex-warning)',
          danger: 'var(--vortex-danger)',
          info: 'var(--vortex-primary)',
        };

        const toast = createTag('div', {
          style: `
            position: fixed;
            top: 24px;
            right: 24px;
            background: ${colors[type]};
            color: white;
            padding: 16px 24px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            z-index: 10000;
            animation: fadeIn 0.3s ease;
            max-width: 400px;
          `,
        }, message);

        document.body.appendChild(toast);

        setTimeout(() => {
          toast.style.animation = 'fadeOut 0.3s ease';
          setTimeout(() => toast.remove(), 300);
        }, 3000);
      }

      updateView() {
        const container = document.querySelector('.vortex-container');
        if (container) {
          container.innerHTML = `
            ${this.renderStats()}
            <div class="vortex-layout">
              ${this.renderSidebar()}
              ${this.renderMainContent()}
            </div>
          `;
          this.attachEventListeners();
        }
      }

      loadInitialData() {
        this.addRecentAction('Application initialized');
      }
    }

    // Initialize the app
    new VortexApp();
  </script>
</body>
</html>

